<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Wedding Of Ismail & Mutia</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>
<body>

    <section id="opening" class="opening">
        <div class="text-center">
            <h2 class="opening-title">The Wedding of<br>Ismail & Mutia</h2>
            <h4>Kepada Yth. Bapak/Ibu/Saudara/i</h4>
            <h1 id="guest-name">Nama Tamu</h1>
            <p>Dengan senang hati mengundang Anda untuk hadir di acara pernikahan kami</p>
            <button class="btn btn-light" id="open-invitation">
                <i class="bi bi-envelope-open-fill"></i> Buka Undangan
            </button>
        </div>
    </section>

    <main id="main-content" style="display: none;">

        <section id="hero" class="hero">
            <div class="container">
                <div class="row align-items-center" style="min-height: 100vh;">
                    <div class="col-md-6">
                        <div id="hero-carousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                <div class="carousel-item active">
                                    <img src="img/berdua_8.jpg" class="d-block w-100" alt="Ismail & Mutia 1">
                                </div>
                                <div class="carousel-item">
                                    <img src="img/berdua_9.jpg" class="d-block w-100" alt="Ismail & Mutia 2">
                                </div>
                                <div class="carousel-item">
                                    <img src="img/berdua_14.png" class="d-block w-100" alt="Ismail & Mutia 3">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 hero-text">
                        <h4>The Wedding Of</h4>
                        <h2>Ismail & Mutia</h2>
                        <p>09 Agustus 2025</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="quran" class="quran fade-in-element">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-8 text-center">
                        <p class="arabic">وَمِنْ اٰيٰتِهٖٓ اَنْ خَلَقَ لَكُمْ مِّنْ اَنْفُسِكُمْ اَزْوَاجًا لِّتَسْكُنُوْٓا اِلَيْهَا وَجَعَلَ بَيْنَكُمْ مَّوَدَّةً وَّرَحْمَةً ۗاِنَّ فِيْ ذٰلِكَ لَاٰيٰتٍ لِّقَوْمٍ يَّتَفَكَّرُوْنَ</p>
                        <p>"Dan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan pasangan-pasangan untukmu dari jenismu sendiri, agar kamu cenderung dan merasa tenteram kepadanya, dan Dia menjadikan di antaramu rasa kasih dan sayang. Sungguh, pada yang demikian itu benar-benar terdapat tanda-tanda (kebesaran Allah) bagi kaum yang berpikir."</p>
                        <p class="fw-bold">Q.S. Ar-Rum: 21</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="mempelai" class="mempelai fade-in-element">
            <div class="container">
                <div class="row text-center justify-content-center">
                    <div class="col-md-4">
                        <img src="img/groom.png" alt="The Groom" class="img-fluid rounded-3 mb-3" style="width: 200px;">
                        <h3>Ismail Abdurrahman Siregar, S.PI</h3>
                        <p>Putra Tercinta dari</p>
                        <p>Bapak Sawaluddin Siregar & Ibu Nepi Yenti</p>
                    </div>
                    <div class="col-md-2 align-self-center display-4">&</div>
                    <div class="col-md-4">
                        <img src="img/bride.png" alt="The Bride" class="img-fluid rounded-3 mb-3" style="width: 200px;">
                        <h3>Mutia Andriyani, S.IP</h3>
                        <p>Putri Tercinta dari</p>
                        <p>Bapak Redwan Umar & Ibu Sabrinatun</p>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="acara" class="acara fade-in-element">
            <div class="container">
                <div class="row justify-content-center align-items-start">
                    <div class="col-lg-5 col-md-12 order-lg-1 mt-4 mt-lg-0">
                        <img src="img/detail_acara.jpg" class="img-fluid rounded-3 shadow" alt="Detail Acara">
                    </div>
                    <div class="col-lg-7 col-md-10 order-lg-2">
                        <div class="text-center text-lg-start mb-4">
                            <h2>Detail Acara</h2>
                        </div>
                        <div class="card-acara">
                            <div class="card-body p-4">
                                <div class="row">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <h5>Akad Nikah</h5>
                                        <p><i class="bi bi-calendar-check"></i> Sabtu, 09 Agustus 2025</p>
                                        <p><i class="bi bi-clock"></i> 09:00 - 11:00 WIB</p>
                                        <p><i class="bi bi-map-fill"></i> Mesjid Nurul Hikmah</p>
                                    </div>
                                    <div class="col-md-6">
                                        <h5>Resepsi</h5>
                                        <p><i class="bi bi-calendar-check"></i> Sabtu, 09 Agustus 2025</p>
                                        <p><i class="bi bi-clock"></i> 11:00 - 21:00 WIB</p>
                                        <p><i class="bi bi-map-fill"></i> Rumah Mempelai Wanita</p>
                                    </div>
                                </div>
                                <hr>
                                <h5>Lokasi</h5>
                                <p><i class="bi bi-geo-alt-fill"></i> Desa Gegarang dan Telege Sari, Kecamatan Jagong Jeget, Kab. Aceh Tengah</p>
                                <a href="https://maps.app.goo.gl/aT5a8o3ckfd4a5UD6" target="_blank" class="btn btn-outline-light btn-sm mt-2">
                                    <i class="bi bi-pin-map-fill"></i> Lihat Lokasi
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="countdown" class="countdown text-center fade-in-element">
            <div class="container">
                <h2>Save The Date</h2>
                <div id="clock" class="d-flex justify-content-center gap-4 mt-4">
                    <div><span id="days">0</span><span>Hari</span></div>
                    <div><span id="hours">0</span><span>Jam</span></div>
                    <div><span id="minutes">0</span><span>Menit</span></div>
                    <div><span id="seconds">0</span><span>Detik</span></div>
                </div>
                <a href="https://www.google.com/calendar/render?action=TEMPLATE&text=Pernikahan%20Ismail%20%26%20Mutia&dates=20250809T020000Z/20250809T140000Z&details=Acara%20pernikahan%20Ismail%20%26%20Mutia&location=Desa%20Gegarang%20dan%20Telege%20Sari,%20Kecamatan%20Jagong%20Jeget,%20Kab.%20Aceh%20Tengah" target="_blank" class="btn btn-light mt-4">
                    <i class="bi bi-calendar-heart-fill"></i> Simpan Tanggal
                </a>
            </div>
        </section>

        <section id="story" class="story fade-in-element">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <img src="img/berdua_1.jpg" class="img-fluid rounded-3" style="width: 80%;" alt="Love Story">
                    </div>
                    <div class="col-md-6">
                        <h2>Love Story</h2>
                        <div>
                            <h5>Pertemuan</h5>
                            <p>Cinta adalah sesuatu yang tak terduga dan datang tanpa permisi. Termasuk takdir yang mempertemukan kami di tahun 2022 ketika ada pekerjaan di Lhokseumawe.</p>
                        </div>
                        <div>
                            <h5>Pendekatan</h5>
                            <p>Setelah melakukan beberapa pertemuan dan bertukar cerita, sehingga beberapa waktu pun berlalu, muncullah ketertarikan di antara kami sehingga ingin melanjutkan ke jenjang yang lebih serius.</p>
                        </div>
                        <div>
                            <h5>Tunangan & Lamaran</h5>
                            <p>Sehingga pada bulan April 2025. Saya dan keluarga mendatangi keluarga Mutia dan menyatakan niat baik saya dan keluarga untuk menjadikan Mutia sebagai pendamping hidup saya.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="gallery" class="gallery text-center fade-in-element">
            <div class="container">
                <h2>Our Gallery</h2>
                 <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 g-3">
                    <div class="col"><img src="img/berdua_2.jpg" class="img-fluid rounded"></div>
                    <div class="col"><img src="img/berdua_4.jpg" class="img-fluid rounded"></div>
                    <div class="col"><img src="img/berdua_6.jpg" class="img-fluid rounded"></div>
                    <div class="col"><img src="img/berdua_8.jpg" class="img-fluid rounded"></div>
                    <div class="col"><img src="img/berdua_1.jpg" class="img-fluid rounded"></div>
                    <div class="col"><img src="img/berdua_10.jpg" class="img-fluid rounded"></div>
                    <div class="col"><img src="img/berdua_11.jpg" class="img-fluid rounded"></div>
                    <div class="col"><img src="img/berdua_13.jpg" class="img-fluid rounded"></div>
                </div>
            </div>
        </section>

        <section id="gift" class="gift text-center fade-in-element">
            <div class="container">
                <h2>Wedding Gift</h2>
                <p>Kehadiran Anda merupakan hadiah terindah. Namun, jika Anda ingin memberi sesuatu yang lain, silakan ketuk tombol di bawah ini.</p>
                <button class="btn btn-light" data-bs-toggle="modal" data-bs-target="#giftModal">
                    <i class="bi bi-gift-fill"></i> Kirim Hadiah
                </button>
            </div>
        </section>

        <!-- SECTION RSVP BARU -->
        <section id="rsvp" class="rsvp fade-in-element">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="text-center mb-5">
                            <h2>Kartu Ucapan</h2>
                            <p>Kirimkan doa dan ucapan terbaik Anda untuk kami.</p>
                        </div>
                        <form id="guestbook-form">
                            <div class="mb-3">
                                <label for="nama" class="form-label">Nama Anda</label>
                                <input type="text" class="form-control" id="nama" required>
                            </div>
                             <div class="mb-3">
                                <label for="ucapan" class="form-label">Ucapan dan Doa</label>
                                <textarea class="form-control" id="ucapan" rows="4" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-light w-100">
                                <i class="bi bi-send-fill"></i> Kirim Ucapan
                            </button>
                        </form>
                    </div>
                </div>
                <div class="row justify-content-center mt-5">
                    <div class="col-lg-8">
                        <h3 class="text-center mb-4">Ucapan & Doa</h3>
                        <div id="guestbook-container" class="guestbook-container">
                            <p class="text-center">Jadilah orang pertama yang mengirim ucapan!</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <div id="audio-control" class="audio-control">
        <button id="toggle-music" class="btn btn-light rounded-circle"><i class="bi bi-play-circle-fill"></i></button>
    </div>

    <div class="modal fade" id="giftModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-center">Wedding Gift</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <p>Terima kasih atas perhatian Anda. Silakan kirimkan hadiah melalui transfer rekening berikut:</p>
                    <img src="img/Download-Logo-BCA-PNG-Terbaru.webp" alt="Logo BCA" style="height: 100px;" class="my-3">
                    <img src="img/Logo-Bank-BSI.webp" alt="Logo BSI" style="height: 100px;" class="my-3">
                    <div class="rekening-item my-3">
                        <p class="mb-1 text-start">a/n ISMAIL ABDURRAHMAN SIREGAR</p>
                        <div class="input-group">
                            <input type="text" class="form-control rekening-number-text" value="6125105614" readonly>
                            <button class="btn btn-outline-secondary btn-copy" type="button" data-bank="BCA">
                                <i class="bi bi-copy"></i> Salin
                            </button>
                        </div>
                        <p class="text-start mt-1 small text-muted">Bank BCA</p>
                    </div>
                    <div class="rekening-item my-3">
                        <p class="mb-1 text-start">a/n MUTIA ANDRIYANI</p>
                        <div class="input-group">
                            <input type="text" class="form-control rekening-number-text" value="7208862302" readonly>
                            <button class="btn btn-outline-secondary btn-copy" type="button" data-bank="BSI">
                                <i class="bi bi-copy"></i> Salin
                            </button>
                        </div>
                        <p class="text-start mt-1 small text-muted">Bank BSI</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <audio id="background-music" src="sound/Marry Your Daughter - Brian McKnight (animation).mp3" loop></audio>

    <div id="copy-toast" class="toast">
        Nomor rekening berhasil disalin!
    </div>

    <!-- SATU NOTIFIKASI TOAST UNTUK SEMUA -->
    <div id="notification-toast" class="toast"></div>

    <!-- Firebase SDK & Guestbook Logic -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, doc, deleteDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        const firebaseConfig = {
        apiKey: "AIzaSyAdE7vP17hFDYWn5NR1_BDVG2Z4PbB4j40",
        authDomain: "undangan-efd18.firebaseapp.com",
        projectId: "undangan-efd18",
        storageBucket: "undangan-efd18.firebasestorage.app",
        messagingSenderId: "573262802729",
        appId: "1:573262802729:web:69ae4145b0ff75a6881138",
        measurementId: "G-ZBF44GMQXJ"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        
        (async () => {
            try {
                await signInAnonymously(auth);
                setupGuestbook();
            } catch (error) {
                console.error("Authentication error:", error);
            }
        })();
        
        function setupGuestbook() {
            const isAdmin = new URLSearchParams(window.location.search).get('admin') === 'true';
            if (isAdmin) {
                document.body.classList.add('admin-mode');
            }

            const guestbookForm = document.getElementById('guestbook-form');
            const guestbookContainer = document.getElementById('guestbook-container');
            const notificationToast = document.getElementById('notification-toast');
            const wishesCollection = collection(db, "wishes");

            const showToast = (message) => {
                if (notificationToast) {
                    notificationToast.innerText = message;
                    notificationToast.classList.add('show');
                    setTimeout(() => notificationToast.classList.remove('show'), 3000);
                }
            };

            const displayWishes = () => {
                const q = query(wishesCollection, orderBy('timestamp', 'desc'));
                onSnapshot(q, (snapshot) => {
                    guestbookContainer.innerHTML = '';
                    if (snapshot.empty) {
                        guestbookContainer.innerHTML = '<p class="text-center">Jadilah orang pertama yang mengirim ucapan!</p>';
                        return;
                    }
                    snapshot.forEach(doc => {
                        const wish = doc.data();
                        const wishCard = document.createElement('div');
                        wishCard.className = 'wish-card';
                        wishCard.innerHTML = `
                            <button class="btn-delete" data-id="${doc.id}" title="Hapus ucapan"><i class="bi bi-trash"></i></button>
                            <h5 class="sender-name">${wish.name}</h5>
                            <p class="wish-text">${wish.wish}</p>
                        `;
                        guestbookContainer.appendChild(wishCard);
                    });
                });
            };

            guestbookForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const nameInput = document.getElementById('nama');
                const wishInput = document.getElementById('ucapan');
                const submitButton = guestbookForm.querySelector('button[type="submit"]');
                const name = nameInput.value.trim();
                const wish = wishInput.value.trim();

                if (!name || !wish) return;

                submitButton.disabled = true;
                submitButton.innerHTML = `<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Mengirim...`;
                
                try {
                    await addDoc(wishesCollection, {
                        name: name,
                        wish: wish,
                        timestamp: new Date()
                    });
                    
                    nameInput.value = '';
                    wishInput.value = '';
                    showToast('Ucapan Anda berhasil terkirim!');

                } catch (error) {
                    console.error("Error adding document: ", error);
                    showToast('Gagal mengirim ucapan. Coba lagi.');
                } finally {
                    submitButton.disabled = false;
                    submitButton.innerHTML = '<i class="bi bi-send-fill"></i> Kirim Ucapan';
                }
            });
            
            guestbookContainer.addEventListener('click', async (e) => {
                const deleteButton = e.target.closest('.btn-delete');
                if (deleteButton) {
                    const docId = deleteButton.dataset.id;
                    try {
                        await deleteDoc(doc(db, "wishes", docId));
                        showToast('Ucapan berhasil dihapus.');
                    } catch (error) {
                        console.error("Error removing document: ", error);
                        showToast('Gagal menghapus ucapan.');
                    }
                }
            });

            displayWishes();
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
